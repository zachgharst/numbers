import{s as L,n as q,o as Q}from"../chunks/scheduler.e108d1fd.js";import{S as W,i as X,g as O,m as A,s as N,h as B,j as E,n as D,f as b,c as G,y as Y,k as I,a as C,x as T,z as S,o as J,A as P,B as V}from"../chunks/index.baaf659c.js";function x(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}const Z=(t,l)=>{const s=l-t;return t+Math.floor(Math.random()*s)},$=()=>{const t=[];let l=1,s=5;for(let e=0;e<7;e++)t.push(Z(l,s)),l=t[t.length-1]+1,s=l+5;return t},K=t=>{let s=structuredClone(t),e=0;const _=Math.floor(Math.random()*s.length);let r=s[_];s=s.filter(d=>d!==r);for(let d=0;d<4;d++){const p=Math.floor(Math.random()*s.length),f=s[p];s=s.filter(w=>w!==f);const c=["+","+","-"];switch(r*f<600&&(c.push("*"),c.push("*"),c.push("*")),(r%f===0||f%r===0)&&(c.push("/"),c.push("/"),c.push("/"),c.push("/")),c[Math.floor(Math.random()*c.length)]){case"+":e=r+f;break;case"-":e=r-f,e<0&&(e*=-1);break;case"*":e=r*f;break;case"/":r>f?e=r/f:e=f/r;break}r=e}return t.includes(e)?K(t):e},R=()=>{const t=$(),l=K(t);return{choices:t,goal:l,leftIndex:-1,rightIndex:-1,operationIndex:-1,errorClick:-1}};function j(t,l,s){const e=t.slice();return e[9]=l[s],e[11]=s,e}function H(t,l,s){const e=t.slice();return e[12]=l[s],e[11]=s,e}function y(t){let l,s=t[12]+"",e,_,r,d,p;function f(){return t[4](t[11])}return{c(){l=O("button"),e=A(s),_=N(),this.h()},l(c){l=B(c,"BUTTON",{class:!0});var a=E(l);e=D(a,s),_=G(a),a.forEach(b),this.h()},h(){I(l,"class",r="numberChoice "+(t[0].leftIndex===t[11]?"selected":"")+" svelte-1gfh1za"),V(l,"invisible",t[12]===0),V(l,"error",t[0].errorClick===t[11])},m(c,a){C(c,l,a),T(l,e),T(l,_),d||(p=S(l,"click",f),d=!0)},p(c,a){t=c,a&1&&s!==(s=t[12]+"")&&J(e,s),a&1&&r!==(r="numberChoice "+(t[0].leftIndex===t[11]?"selected":"")+" svelte-1gfh1za")&&I(l,"class",r),a&1&&V(l,"invisible",t[12]===0),a&1&&V(l,"error",t[0].errorClick===t[11])},d(c){c&&b(l),d=!1,p()}}}function F(t){let l,s=t[9]+"",e,_,r,d,p;function f(){return t[5](t[11])}return{c(){l=O("button"),e=A(s),_=N(),this.h()},l(c){l=B(c,"BUTTON",{class:!0});var a=E(l);e=D(a,s),_=G(a),a.forEach(b),this.h()},h(){I(l,"class",r="opButton "+(t[0].operationIndex===t[11]?"selected":"")+" svelte-1gfh1za")},m(c,a){C(c,l,a),T(l,e),T(l,_),d||(p=S(l,"click",f),d=!0)},p(c,a){t=c,a&1&&r!==(r="opButton "+(t[0].operationIndex===t[11]?"selected":"")+" svelte-1gfh1za")&&I(l,"class",r)},d(c){c&&b(l),d=!1,p()}}}function ee(t){let l,s=t[0].goal+"",e,_,r,d,p,f,c,a,w="New Game",u,v,m=x(t[0].choices),i=[];for(let n=0;n<m.length;n+=1)i[n]=y(H(t,m,n));let k=x(t[1]),h=[];for(let n=0;n<k.length;n+=1)h[n]=F(j(t,k,n));return{c(){l=O("h1"),e=A(s),_=N(),r=O("div");for(let n=0;n<i.length;n+=1)i[n].c();d=N(),p=O("div");for(let n=0;n<h.length;n+=1)h[n].c();f=N(),c=O("div"),a=O("button"),a.textContent=w,this.h()},l(n){l=B(n,"H1",{class:!0});var g=E(l);e=D(g,s),g.forEach(b),_=G(n),r=B(n,"DIV",{class:!0});var o=E(r);for(let M=0;M<i.length;M+=1)i[M].l(o);o.forEach(b),d=G(n),p=B(n,"DIV",{class:!0});var z=E(p);for(let M=0;M<h.length;M+=1)h[M].l(z);z.forEach(b),f=G(n),c=B(n,"DIV",{class:!0});var U=E(c);a=B(U,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),Y(a)!=="svelte-8sqn8m"&&(a.textContent=w),U.forEach(b),this.h()},h(){I(l,"class","svelte-1gfh1za"),I(r,"class","svelte-1gfh1za"),I(p,"class","svelte-1gfh1za"),I(a,"id","newGame"),I(a,"class","svelte-1gfh1za"),I(c,"class","svelte-1gfh1za")},m(n,g){C(n,l,g),T(l,e),C(n,_,g),C(n,r,g);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(r,null);C(n,d,g),C(n,p,g);for(let o=0;o<h.length;o+=1)h[o]&&h[o].m(p,null);C(n,f,g),C(n,c,g),T(c,a),u||(v=S(a,"click",t[6]),u=!0)},p(n,[g]){if(g&1&&s!==(s=n[0].goal+"")&&J(e,s),g&5){m=x(n[0].choices);let o;for(o=0;o<m.length;o+=1){const z=H(n,m,o);i[o]?i[o].p(z,g):(i[o]=y(z),i[o].c(),i[o].m(r,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=m.length}if(g&11){k=x(n[1]);let o;for(o=0;o<k.length;o+=1){const z=j(n,k,o);h[o]?h[o].p(z,g):(h[o]=F(z),h[o].c(),h[o].m(p,null))}for(;o<h.length;o+=1)h[o].d(1);h.length=k.length}},i:q,o:q,d(n){n&&(b(l),b(_),b(r),b(d),b(p),b(f),b(c)),P(i,n),P(h,n),u=!1,v()}}}function te(t,l,s){let e={choices:[0],goal:0,leftIndex:-1,rightIndex:-1,operationIndex:-1,errorClick:-1},_=["u","+","-","*","/"];Q(()=>{s(0,e=R())});const r=(u,v,m)=>{const i=e.choices[u],k=e.choices[m];return!(v=="-"&&i-k<0||v=="/"&&i%k!==0)},d=(u,v,m)=>{s(0,e.leftIndex=m,e),s(0,e.operationIndex=-1,e);const i=e.choices[u],k=e.choices[m];let h=0;switch(v){case"+":h=i+k;break;case"-":h=i-k;break;case"*":h=i*k;break;case"/":h=i/k;break}s(0,e.choices[m]=h,e),s(0,e.choices[u]=0,e),console.log(`Result should be ${h}`),e.choices.includes(e.goal)&&alert("holy shit you win!")},p=u=>{if(e.choices[u]!==0)if(e.operationIndex!==-1&&e.leftIndex!==u){const v=e.leftIndex,m=_[e.operationIndex],i=u;r(v,m,i)?d(v,m,i):(s(0,e.errorClick=u,e),setTimeout(()=>{s(0,e.errorClick=-1,e)},2e3))}else e.leftIndex===u?(s(0,e.leftIndex=-1,e),s(0,e.operationIndex=-1,e)):s(0,e.leftIndex=u,e)},f=u=>{u===0?console.log("Clicked undo"):e.leftIndex!==-1&&s(0,e.operationIndex=u,e)};return[e,_,p,f,u=>p(u),u=>f(u),()=>s(0,e=R())]}class ne extends W{constructor(l){super(),X(this,l,te,ee,L,{})}}export{ne as component};
