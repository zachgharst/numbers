var $=Object.defineProperty;var ee=(l,t,s)=>t in l?$(l,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[t]=s;var v=(l,t,s)=>(ee(l,typeof t!="symbol"?t+"":t,s),s);import{s as te,n as H,o as le}from"../chunks/scheduler.e108d1fd.js";import{S as se,i as ne,g as S,m as B,s as O,h as x,j as N,n as y,f as w,c as E,y as oe,k as V,a as G,x as b,z as q,o as X,A as R,B as D}from"../chunks/index.baaf659c.js";function U(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}const h={None:"none",Undo:"undo",Add:"add",Subtract:"subtract",Multiply:"multiply",Divide:"divide"},F=[h.Undo,h.Add,h.Subtract,h.Multiply,h.Divide],re=l=>{switch(l){case h.Undo:return"⎌";case h.Add:return"+";case h.Subtract:return"-";case h.Multiply:return"×";case h.Divide:return"÷"}return""};class Y{constructor(t,s){v(this,"choices",[]);v(this,"goal",0);v(this,"leftIndex",-1);v(this,"rightIndex",-1);v(this,"operationSelected",h.None);v(this,"errorClick",-1);v(this,"actionsTaken",[]);this.choices=t,this.goal=s}}const ce=(l,t)=>{const s=t-l;return l+Math.floor(Math.random()*s)},ae=()=>{const l=[];let t=1,s=5;for(let e=0;e<7;e++)l.push(ce(t,s)),t=l[l.length-1]+1,s=t+5;return l},Z=l=>{let s=structuredClone(l),e=0;const d=Math.floor(Math.random()*s.length);let i=s[d];s=s.filter(u=>u!==i);for(let u=0;u<4;u++){const m=Math.floor(Math.random()*s.length),r=s[m];s=s.filter(k=>k!==r);const c=["+","+","-"];switch(i*r<600&&(c.push("*"),c.push("*"),c.push("*")),(i%r===0||r%i===0)&&(c.push("/"),c.push("/"),c.push("/"),c.push("/")),c[Math.floor(Math.random()*c.length)]){case"+":e=i+r;break;case"-":e=i-r,e<0&&(e*=-1);break;case"*":e=i*r;break;case"/":i>r?e=i/r:e=r/i;break}i=e}return l.includes(e)?Z(l):e},J=()=>{const l=ae(),t=Z(l);return new Y(l,t)};class ie{constructor(t,s,e,d,i){v(this,"leftIndex");v(this,"leftValue");v(this,"operation");v(this,"rightIndex");v(this,"rightValue");this.leftIndex=t,this.leftValue=s,this.operation=e,this.rightIndex=d,this.rightValue=i}}function K(l,t,s){const e=l.slice();return e[9]=t[s],e}function L(l,t,s){const e=l.slice();return e[12]=t[s],e[14]=s,e}function Q(l){let t,s=l[12]+"",e,d,i,u,m;function r(){return l[3](l[14])}return{c(){t=S("button"),e=B(s),d=O(),this.h()},l(c){t=x(c,"BUTTON",{class:!0});var f=N(t);e=y(f,s),d=E(f),f.forEach(w),this.h()},h(){V(t,"class",i="numberChoice "+(l[0].leftIndex===l[14]?"selected":"")+" svelte-1gvlwxd"),D(t,"invisible",l[12]===0),D(t,"error",l[0].errorClick===l[14])},m(c,f){G(c,t,f),b(t,e),b(t,d),u||(m=q(t,"click",r),u=!0)},p(c,f){l=c,f&1&&s!==(s=l[12]+"")&&X(e,s),f&1&&i!==(i="numberChoice "+(l[0].leftIndex===l[14]?"selected":"")+" svelte-1gvlwxd")&&V(t,"class",i),f&1&&D(t,"invisible",l[12]===0),f&1&&D(t,"error",l[0].errorClick===l[14])},d(c){c&&w(t),u=!1,m()}}}function W(l){let t,s=re(l[9])+"",e,d,i,u;function m(){return l[4](l[9])}return{c(){t=S("button"),e=B(s),d=O(),this.h()},l(r){t=x(r,"BUTTON",{class:!0});var c=N(t);e=y(c,s),d=E(c),c.forEach(w),this.h()},h(){V(t,"class","opButton svelte-1gvlwxd"),D(t,"selected",l[0].operationSelected===l[9])},m(r,c){G(r,t,c),b(t,e),b(t,d),i||(u=q(t,"click",m),i=!0)},p(r,c){l=r,c&1&&D(t,"selected",l[0].operationSelected===l[9])},d(r){r&&w(t),i=!1,u()}}}function he(l){let t,s,e=l[0].goal+"",d,i,u,m,r,c,f,k,n="New Game",I,P,T=U(l[0].choices),g=[];for(let a=0;a<T.length;a+=1)g[a]=Q(L(l,T,a));let A=U(F),p=[];for(let a=0;a<A.length;a+=1)p[a]=W(K(l,A,a));return{c(){t=S("div"),s=S("h1"),d=B(e),i=O(),u=S("div");for(let a=0;a<g.length;a+=1)g[a].c();m=O(),r=S("div");for(let a=0;a<p.length;a+=1)p[a].c();c=O(),f=S("div"),k=S("button"),k.textContent=n,this.h()},l(a){t=x(a,"DIV",{class:!0});var _=N(t);s=x(_,"H1",{class:!0});var o=N(s);d=y(o,e),o.forEach(w),i=E(_),u=x(_,"DIV",{class:!0});var C=N(u);for(let M=0;M<g.length;M+=1)g[M].l(C);C.forEach(w),m=E(_),r=x(_,"DIV",{class:!0});var j=N(r);for(let M=0;M<p.length;M+=1)p[M].l(j);j.forEach(w),c=E(_),f=x(_,"DIV",{class:!0});var z=N(f);k=x(z,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),oe(k)!=="svelte-8sqn8m"&&(k.textContent=n),z.forEach(w),_.forEach(w),this.h()},h(){V(s,"class","svelte-1gvlwxd"),V(u,"class","svelte-1gvlwxd"),V(r,"class","svelte-1gvlwxd"),V(k,"id","newGame"),V(k,"class","svelte-1gvlwxd"),V(f,"class","svelte-1gvlwxd"),V(t,"class","container svelte-1gvlwxd")},m(a,_){G(a,t,_),b(t,s),b(s,d),b(t,i),b(t,u);for(let o=0;o<g.length;o+=1)g[o]&&g[o].m(u,null);b(t,m),b(t,r);for(let o=0;o<p.length;o+=1)p[o]&&p[o].m(r,null);b(t,c),b(t,f),b(f,k),I||(P=q(k,"click",l[5]),I=!0)},p(a,[_]){if(_&1&&e!==(e=a[0].goal+"")&&X(d,e),_&3){T=U(a[0].choices);let o;for(o=0;o<T.length;o+=1){const C=L(a,T,o);g[o]?g[o].p(C,_):(g[o]=Q(C),g[o].c(),g[o].m(u,null))}for(;o<g.length;o+=1)g[o].d(1);g.length=T.length}if(_&5){A=U(F);let o;for(o=0;o<A.length;o+=1){const C=K(a,A,o);p[o]?p[o].p(C,_):(p[o]=W(C),p[o].c(),p[o].m(r,null))}for(;o<p.length;o+=1)p[o].d(1);p.length=A.length}},i:H,o:H,d(a){a&&w(t),R(g,a),R(p,a),I=!1,P()}}}function ue(l,t,s){let e=new Y([],0);le(()=>{s(0,e=J())});const d=n=>!(n.operation==h.Subtract&&n.leftValue-n.rightValue<0||n.operation==h.Divide&&n.leftValue%n.rightValue!==0),i=n=>{s(0,e.leftIndex=n.rightIndex,e),s(0,e.operationSelected=h.None,e);let I=0;switch(n.operation){case h.Add:I=n.leftValue+n.rightValue;break;case h.Subtract:I=n.leftValue-n.rightValue;break;case h.Multiply:I=n.leftValue*n.rightValue;break;case h.Divide:I=n.leftValue/n.rightValue;break}s(0,e.choices[n.rightIndex]=I,e),s(0,e.choices[n.leftIndex]=0,e),e.choices.includes(e.goal)&&alert("holy shit you win!"),e.actionsTaken.push(n)},u=()=>{if(e.actionsTaken.length===0)return;const n=e.actionsTaken.pop();s(0,e.choices[n.leftIndex]=n.leftValue,e),s(0,e.choices[n.rightIndex]=n.rightValue,e),s(0,e.leftIndex=-1,e),s(0,e.operationSelected=h.None,e)},m=n=>{if(e.choices[n]!==0)if(e.operationSelected!==h.None&&e.leftIndex!==n){let I=new ie(e.leftIndex,e.choices[e.leftIndex],e.operationSelected,n,e.choices[n]);d(I)?i(I):(s(0,e.errorClick=n,e),setTimeout(()=>{s(0,e.errorClick=-1,e)},1e3))}else e.leftIndex===n?(s(0,e.leftIndex=-1,e),s(0,e.operationSelected=h.None,e)):s(0,e.leftIndex=n,e)},r=n=>{n===h.Undo?u():e.leftIndex!==-1&&s(0,e.operationSelected=n,e)};return[e,m,r,n=>m(n),n=>r(n),()=>s(0,e=J())]}class pe extends se{constructor(t){super(),ne(this,t,ue,he,te,{})}}export{pe as component};
