var fe=Object.defineProperty;var de=(s,t,n)=>t in s?fe(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var g=(s,t,n)=>(de(s,typeof t!="symbol"?t+"":t,n),n);import{s as y,n as p,e as re,f as Y,b as Z,h as ee,o as ge}from"../chunks/scheduler.1d0640fb.js";import{S as M,i as T,g as _,m as P,h as b,j as k,n as j,f as d,k as I,a as w,x as m,o as R,y as ce,s as V,c as C,z as S,A as H,B as me,C as te,r as D,u as O,v as B,d as G,t as E,w as A}from"../chunks/index.d61eb492.js";import{w as pe}from"../chunks/index.cb6ab9ea.js";function z(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}const _e=(s,t)=>{const n=t-s;return s+Math.floor(Math.random()*n)},be=()=>{const s=[];let t=1,n=5;for(let e=0;e<7;e++)s.push(_e(t,n)),t=s[s.length-1]+1,n=t+5;return s},ie=s=>{let n=structuredClone(s),e=0;const l=Math.floor(Math.random()*n.length);let r=n[l];n=n.filter(a=>a!==r);for(let a=0;a<4;a++){const c=Math.floor(Math.random()*n.length),o=n[c];n=n.filter(N=>N!==o);const i=["+","+","-"];switch(r*o<600&&(i.push("*"),i.push("*"),i.push("*")),(r%o===0||o%r===0)&&(i.push("/"),i.push("/"),i.push("/"),i.push("/")),i[Math.floor(Math.random()*i.length)]){case"+":e=r+o;break;case"-":e=r-o,e<0&&(e*=-1);break;case"*":e=r*o;break;case"/":r>o?e=r/o:e=o/r;break}r=e}return s.includes(e)?ie(s):e},h={None:"none",Undo:"undo",Add:"add",Subtract:"subtract",Multiply:"multiply",Divide:"divide"},ne=[h.Undo,h.Add,h.Subtract,h.Multiply,h.Divide],ve=s=>{switch(s){case h.Undo:return"⎌";case h.Add:return"+";case h.Subtract:return"-";case h.Multiply:return"×";case h.Divide:return"÷"}return""},q=class q{constructor(t,n){g(this,"choices",[]);g(this,"goal",0);g(this,"leftIndex",-1);g(this,"rightIndex",-1);g(this,"operationSelected",h.None);g(this,"errorClick",-1);g(this,"actionsTaken",[]);this.choices=t,this.goal=n}};g(q,"Create",()=>{const t=be(),n=ie(t);return new q(t,n)});let U=q;function ke(s){let t,n;return{c(){t=_("h1"),n=P(s[0]),this.h()},l(e){t=b(e,"H1",{class:!0});var l=k(t);n=j(l,s[0]),l.forEach(d),this.h()},h(){I(t,"class","svelte-1ix17d7")},m(e,l){w(e,t,l),m(t,n)},p(e,[l]){l&1&&R(n,e[0])},i:p,o:p,d(e){e&&d(t)}}}function Se(s,t,n){let{goal:e}=t;return s.$$set=l=>{"goal"in l&&n(0,e=l.goal)},[e]}class Ie extends M{constructor(t){super(),T(this,t,Se,ke,y,{goal:0})}}class we{constructor(t,n,e,l,r){g(this,"leftIndex");g(this,"leftValue");g(this,"operation");g(this,"rightIndex");g(this,"rightValue");this.leftIndex=t,this.leftValue=n,this.operation=e,this.rightIndex=l,this.rightValue=r}}function se(s,t,n){const e=s.slice();return e[5]=t[n],e[7]=n,e}function le(s){let t,n=s[5]+"",e,l,r,a;function c(){return s[2](s[7])}return{c(){t=_("button"),e=P(n),l=V(),this.h()},l(o){t=b(o,"BUTTON",{class:!0});var i=k(t);e=j(i,n),l=C(i),i.forEach(d),this.h()},h(){I(t,"class","numberChoice svelte-1cdaoug"),S(t,"error",s[0].errorClick===s[7]),S(t,"selected",s[0].leftIndex===s[7]),S(t,"invisible",s[5]===0)},m(o,i){w(o,t,i),m(t,e),m(t,l),r||(a=H(t,"click",c),r=!0)},p(o,i){s=o,i&1&&n!==(n=s[5]+"")&&R(e,n),i&1&&S(t,"error",s[0].errorClick===s[7]),i&1&&S(t,"selected",s[0].leftIndex===s[7]),i&1&&S(t,"invisible",s[5]===0)},d(o){o&&d(t),r=!1,a()}}}function $e(s){let t,n=z(s[0].choices),e=[];for(let l=0;l<n.length;l+=1)e[l]=le(se(s,n,l));return{c(){t=_("div");for(let l=0;l<e.length;l+=1)e[l].c()},l(l){t=b(l,"DIV",{});var r=k(t);for(let a=0;a<e.length;a+=1)e[a].l(r);r.forEach(d)},m(l,r){w(l,t,r);for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(t,null)},p(l,[r]){if(r&3){n=z(l[0].choices);let a;for(a=0;a<n.length;a+=1){const c=se(l,n,a);e[a]?e[a].p(c,r):(e[a]=le(c),e[a].c(),e[a].m(t,null))}for(;a<e.length;a+=1)e[a].d(1);e.length=n.length}},i:p,o:p,d(l){l&&d(t),ce(e,l)}}}function Ve(s,t,n){let{gameState:e}=t;const l=o=>!(o.operation==h.Subtract&&o.leftValue-o.rightValue<0||o.operation==h.Divide&&o.leftValue%o.rightValue!==0),r=o=>{n(0,e.leftIndex=o.rightIndex,e),n(0,e.operationSelected=h.None,e);let i=0;switch(o.operation){case h.Add:i=o.leftValue+o.rightValue;break;case h.Subtract:i=o.leftValue-o.rightValue;break;case h.Multiply:i=o.leftValue*o.rightValue;break;case h.Divide:i=o.leftValue/o.rightValue;break}n(0,e.choices[o.rightIndex]=i,e),n(0,e.choices[o.leftIndex]=0,e),e.choices.includes(e.goal)&&alert("holy shit you win!"),e.actionsTaken.push(o)},a=o=>{if(e.choices[o]!==0)if(e.operationSelected!==h.None&&e.leftIndex!==o){let i=new we(e.leftIndex,e.choices[e.leftIndex],e.operationSelected,o,e.choices[o]);l(i)?r(i):(n(0,e.errorClick=o,e),setTimeout(()=>{n(0,e.errorClick=-1,e)},1e3))}else e.leftIndex===o?(n(0,e.leftIndex=-1,e),n(0,e.operationSelected=h.None,e)):n(0,e.leftIndex=o,e)},c=o=>a(o);return s.$$set=o=>{"gameState"in o&&n(0,e=o.gameState)},[e,a,c]}class Ce extends M{constructor(t){super(),T(this,t,Ve,$e,y,{gameState:0})}}function oe(s,t,n){const e=s.slice();return e[4]=t[n],e}function ae(s){let t,n=ve(s[4])+"",e,l,r,a;function c(){return s[2](s[4])}return{c(){t=_("button"),e=P(n),l=V(),this.h()},l(o){t=b(o,"BUTTON",{class:!0});var i=k(t);e=j(i,n),l=C(i),i.forEach(d),this.h()},h(){I(t,"class","opButton svelte-cvnheh"),S(t,"selected",s[0].operationSelected===s[4])},m(o,i){w(o,t,i),m(t,e),m(t,l),r||(a=H(t,"click",c),r=!0)},p(o,i){s=o,i&1&&S(t,"selected",s[0].operationSelected===s[4])},d(o){o&&d(t),r=!1,a()}}}function ye(s){let t,n=z(ne),e=[];for(let l=0;l<n.length;l+=1)e[l]=ae(oe(s,n,l));return{c(){t=_("div");for(let l=0;l<e.length;l+=1)e[l].c()},l(l){t=b(l,"DIV",{});var r=k(t);for(let a=0;a<e.length;a+=1)e[a].l(r);r.forEach(d)},m(l,r){w(l,t,r);for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(t,null)},p(l,[r]){if(r&3){n=z(ne);let a;for(a=0;a<n.length;a+=1){const c=oe(l,n,a);e[a]?e[a].p(c,r):(e[a]=ae(c),e[a].c(),e[a].m(t,null))}for(;a<e.length;a+=1)e[a].d(1);e.length=n.length}},i:p,o:p,d(l){l&&d(t),ce(e,l)}}}function Me(s,t,n){let{gameState:e}=t;const l=()=>{const c=e.actionsTaken.pop();c!==void 0&&(n(0,e.choices[c.leftIndex]=c.leftValue,e),n(0,e.choices[c.rightIndex]=c.rightValue,e),n(0,e.leftIndex=-1,e),n(0,e.operationSelected=h.None,e))},r=c=>{c===h.Undo?l():e.leftIndex!==-1&&n(0,e.operationSelected=c,e)},a=c=>r(c);return s.$$set=c=>{"gameState"in c&&n(0,e=c.gameState)},[e,r,a]}class Te extends M{constructor(t){super(),T(this,t,Me,ye,y,{gameState:0})}}function Ne(s){let t,n,e="New Game",l,r;return{c(){t=_("div"),n=_("button"),n.textContent=e,this.h()},l(a){t=b(a,"DIV",{});var c=k(t);n=b(c,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),me(n)!=="svelte-1ell0uf"&&(n.textContent=e),c.forEach(d),this.h()},h(){I(n,"id","newGame"),I(n,"class","svelte-17pvczz")},m(a,c){w(a,t,c),m(t,n),l||(r=H(n,"click",s[1]),l=!0)},p,i:p,o:p,d(a){a&&d(t),l=!1,r()}}}function De(s,t,n){let{newGame:e}=t;const l=()=>e();return s.$$set=r=>{"newGame"in r&&n(0,e=r.newGame)},[e,l]}class Oe extends M{constructor(t){super(),T(this,t,De,Ne,y,{newGame:0})}}const x=pe(localStorage.getItem("theme")||"light");x.subscribe(s=>localStorage.setItem("theme",s));function Be(s){let t,n,e=s[0]==="dark"?"Light Mode":"Dark Mode",l,r,a;return{c(){t=_("div"),n=_("button"),l=P(e),this.h()},l(c){t=b(c,"DIV",{});var o=k(t);n=b(o,"BUTTON",{id:!0,class:!0});var i=k(n);l=j(i,e),i.forEach(d),o.forEach(d),this.h()},h(){I(n,"id","theme"),I(n,"class","svelte-s1eatg")},m(c,o){w(c,t,o),m(t,n),m(n,l),r||(a=H(n,"click",s[2]),r=!0)},p(c,[o]){o&1&&e!==(e=c[0]==="dark"?"Light Mode":"Dark Mode")&&R(l,e)},i:p,o:p,d(c){c&&d(t),r=!1,a()}}}function Ge(s,t,n){let e;re(s,x,a=>n(0,e=a));const l=()=>{e==="dark"?(Y(x,e="light",e),document.body.classList.remove("dark-mode")):(Y(x,e="dark",e),document.body.classList.add("dark-mode"))};return[e,l,()=>l()]}class Ee extends M{constructor(t){super(),T(this,t,Ge,Be,y,{})}}function Ae(s){let t,n,e,l,r,a,c,o,i,v,N,$,L;n=new Ie({props:{goal:s[0].goal}});function ue(u){s[1](u)}let F={};s[0]!==void 0&&(F.gameState=s[0]),l=new Ce({props:F}),Z.push(()=>te(l,"gameState",ue));function he(u){s[2](u)}let J={};return s[0]!==void 0&&(J.gameState=s[0]),c=new Te({props:J}),Z.push(()=>te(c,"gameState",he)),v=new Oe({props:{newGame:s[3]}}),$=new Ee({}),{c(){t=_("div"),D(n.$$.fragment),e=V(),D(l.$$.fragment),a=V(),D(c.$$.fragment),i=V(),D(v.$$.fragment),N=V(),D($.$$.fragment),this.h()},l(u){t=b(u,"DIV",{class:!0});var f=k(t);O(n.$$.fragment,f),e=C(f),O(l.$$.fragment,f),a=C(f),O(c.$$.fragment,f),i=C(f),O(v.$$.fragment,f),N=C(f),O($.$$.fragment,f),f.forEach(d),this.h()},h(){I(t,"class","container svelte-q0i8ml")},m(u,f){w(u,t,f),B(n,t,null),m(t,e),B(l,t,null),m(t,a),B(c,t,null),m(t,i),B(v,t,null),m(t,N),B($,t,null),L=!0},p(u,[f]){const K={};f&1&&(K.goal=u[0].goal),n.$set(K);const Q={};!r&&f&1&&(r=!0,Q.gameState=u[0],ee(()=>r=!1)),l.$set(Q);const W={};!o&&f&1&&(o=!0,W.gameState=u[0],ee(()=>o=!1)),c.$set(W);const X={};f&1&&(X.newGame=u[3]),v.$set(X)},i(u){L||(G(n.$$.fragment,u),G(l.$$.fragment,u),G(c.$$.fragment,u),G(v.$$.fragment,u),G($.$$.fragment,u),L=!0)},o(u){E(n.$$.fragment,u),E(l.$$.fragment,u),E(c.$$.fragment,u),E(v.$$.fragment,u),E($.$$.fragment,u),L=!1},d(u){u&&d(t),A(n),A(l),A(c),A(v),A($)}}}function Ue(s,t,n){let e;re(s,x,o=>n(4,e=o));let l=new U([0,0,0,0,0,0,0],0);ge(()=>{n(0,l=U.Create()),e!=="dark"&&document.body.classList.remove("dark-mode")});function r(o){l=o,n(0,l)}function a(o){l=o,n(0,l)}return[l,r,a,()=>n(0,l=U.Create())]}class Pe extends M{constructor(t){super(),T(this,t,Ue,Ae,y,{})}}export{Pe as component};
