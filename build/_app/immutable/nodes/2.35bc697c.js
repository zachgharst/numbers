var Y=Object.defineProperty;var Z=(t,l,s)=>l in t?Y(t,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[l]=s;var k=(t,l,s)=>(Z(t,typeof l!="symbol"?l+"":l,s),s);import{s as $,n as P,o as ee}from"../chunks/scheduler.e108d1fd.js";import{S as te,i as le,g as M,m as B,s as U,h as N,j as z,n as y,f as b,c as E,y as se,k as V,a as I,x as O,z as G,o as Q,A as j,B as A}from"../chunks/index.baaf659c.js";function x(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}const u={None:"none",Undo:"undo",Add:"add",Subtract:"subtract",Multiply:"multiply",Divide:"divide"},H=[u.Undo,u.Add,u.Subtract,u.Multiply,u.Divide],ne=t=>{switch(t){case u.Undo:return"⎌";case u.Add:return"+";case u.Subtract:return"-";case u.Multiply:return"×";case u.Divide:return"÷"}return""};class W{constructor(l,s){k(this,"choices",[]);k(this,"goal",0);k(this,"leftIndex",-1);k(this,"rightIndex",-1);k(this,"operationSelected",u.None);k(this,"errorClick",-1);k(this,"actionsTaken",[]);this.choices=l,this.goal=s}}const oe=(t,l)=>{const s=l-t;return t+Math.floor(Math.random()*s)},re=()=>{const t=[];let l=1,s=5;for(let e=0;e<7;e++)t.push(oe(l,s)),l=t[t.length-1]+1,s=l+5;return t},X=t=>{let s=structuredClone(t),e=0;const f=Math.floor(Math.random()*s.length);let a=s[f];s=s.filter(d=>d!==a);for(let d=0;d<4;d++){const p=Math.floor(Math.random()*s.length),i=s[p];s=s.filter(D=>D!==i);const c=["+","+","-"];switch(a*i<600&&(c.push("*"),c.push("*"),c.push("*")),(a%i===0||i%a===0)&&(c.push("/"),c.push("/"),c.push("/"),c.push("/")),c[Math.floor(Math.random()*c.length)]){case"+":e=a+i;break;case"-":e=a-i,e<0&&(e*=-1);break;case"*":e=a*i;break;case"/":a>i?e=a/i:e=i/a;break}a=e}return t.includes(e)?X(t):e},R=()=>{const t=re(),l=X(t);return new W(t,l)};class ce{constructor(l,s,e,f,a){k(this,"leftIndex");k(this,"leftValue");k(this,"operation");k(this,"rightIndex");k(this,"rightValue");this.leftIndex=l,this.leftValue=s,this.operation=e,this.rightIndex=f,this.rightValue=a}}function F(t,l,s){const e=t.slice();return e[9]=l[s],e}function J(t,l,s){const e=t.slice();return e[12]=l[s],e[14]=s,e}function K(t){let l,s=t[12]+"",e,f,a,d,p;function i(){return t[3](t[14])}return{c(){l=M("button"),e=B(s),f=U(),this.h()},l(c){l=N(c,"BUTTON",{class:!0});var h=z(l);e=y(h,s),f=E(h),h.forEach(b),this.h()},h(){V(l,"class",a="numberChoice "+(t[0].leftIndex===t[14]?"selected":"")+" svelte-1gfh1za"),A(l,"invisible",t[12]===0),A(l,"error",t[0].errorClick===t[14])},m(c,h){I(c,l,h),O(l,e),O(l,f),d||(p=G(l,"click",i),d=!0)},p(c,h){t=c,h&1&&s!==(s=t[12]+"")&&Q(e,s),h&1&&a!==(a="numberChoice "+(t[0].leftIndex===t[14]?"selected":"")+" svelte-1gfh1za")&&V(l,"class",a),h&1&&A(l,"invisible",t[12]===0),h&1&&A(l,"error",t[0].errorClick===t[14])},d(c){c&&b(l),d=!1,p()}}}function L(t){let l,s=ne(t[9])+"",e,f,a,d;function p(){return t[4](t[9])}return{c(){l=M("button"),e=B(s),f=U(),this.h()},l(i){l=N(i,"BUTTON",{class:!0});var c=z(l);e=y(c,s),f=E(c),c.forEach(b),this.h()},h(){V(l,"class","opButton svelte-1gfh1za"),A(l,"selected",t[0].operationSelected===t[9])},m(i,c){I(i,l,c),O(l,e),O(l,f),a||(d=G(l,"click",p),a=!0)},p(i,c){t=i,c&1&&A(l,"selected",t[0].operationSelected===t[9])},d(i){i&&b(l),a=!1,d()}}}function ae(t){let l,s=t[0].goal+"",e,f,a,d,p,i,c,h,D="New Game",n,v,T=x(t[0].choices),g=[];for(let o=0;o<T.length;o+=1)g[o]=K(J(t,T,o));let w=x(H),_=[];for(let o=0;o<w.length;o+=1)_[o]=L(F(t,w,o));return{c(){l=M("h1"),e=B(s),f=U(),a=M("div");for(let o=0;o<g.length;o+=1)g[o].c();d=U(),p=M("div");for(let o=0;o<_.length;o+=1)_[o].c();i=U(),c=M("div"),h=M("button"),h.textContent=D,this.h()},l(o){l=N(o,"H1",{class:!0});var m=z(l);e=y(m,s),m.forEach(b),f=E(o),a=N(o,"DIV",{class:!0});var r=z(a);for(let S=0;S<g.length;S+=1)g[S].l(r);r.forEach(b),d=E(o),p=N(o,"DIV",{class:!0});var C=z(p);for(let S=0;S<_.length;S+=1)_[S].l(C);C.forEach(b),i=E(o),c=N(o,"DIV",{class:!0});var q=z(c);h=N(q,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),se(h)!=="svelte-8sqn8m"&&(h.textContent=D),q.forEach(b),this.h()},h(){V(l,"class","svelte-1gfh1za"),V(a,"class","svelte-1gfh1za"),V(p,"class","svelte-1gfh1za"),V(h,"id","newGame"),V(h,"class","svelte-1gfh1za"),V(c,"class","svelte-1gfh1za")},m(o,m){I(o,l,m),O(l,e),I(o,f,m),I(o,a,m);for(let r=0;r<g.length;r+=1)g[r]&&g[r].m(a,null);I(o,d,m),I(o,p,m);for(let r=0;r<_.length;r+=1)_[r]&&_[r].m(p,null);I(o,i,m),I(o,c,m),O(c,h),n||(v=G(h,"click",t[5]),n=!0)},p(o,[m]){if(m&1&&s!==(s=o[0].goal+"")&&Q(e,s),m&3){T=x(o[0].choices);let r;for(r=0;r<T.length;r+=1){const C=J(o,T,r);g[r]?g[r].p(C,m):(g[r]=K(C),g[r].c(),g[r].m(a,null))}for(;r<g.length;r+=1)g[r].d(1);g.length=T.length}if(m&5){w=x(H);let r;for(r=0;r<w.length;r+=1){const C=F(o,w,r);_[r]?_[r].p(C,m):(_[r]=L(C),_[r].c(),_[r].m(p,null))}for(;r<_.length;r+=1)_[r].d(1);_.length=w.length}},i:P,o:P,d(o){o&&(b(l),b(f),b(a),b(d),b(p),b(i),b(c)),j(g,o),j(_,o),n=!1,v()}}}function ie(t,l,s){let e=new W([],0);ee(()=>{s(0,e=R())});const f=n=>!(n.operation==u.Subtract&&n.leftValue-n.rightValue<0||n.operation==u.Divide&&n.leftValue%n.rightValue!==0),a=n=>{s(0,e.leftIndex=n.rightIndex,e),s(0,e.operationSelected=u.None,e);let v=0;switch(n.operation){case u.Add:v=n.leftValue+n.rightValue;break;case u.Subtract:v=n.leftValue-n.rightValue;break;case u.Multiply:v=n.leftValue*n.rightValue;break;case u.Divide:v=n.leftValue/n.rightValue;break}s(0,e.choices[n.rightIndex]=v,e),s(0,e.choices[n.leftIndex]=0,e),e.choices.includes(e.goal)&&alert("holy shit you win!"),e.actionsTaken.push(n)},d=()=>{if(e.actionsTaken.length===0)return;const n=e.actionsTaken.pop();s(0,e.choices[n.leftIndex]=n.leftValue,e),s(0,e.choices[n.rightIndex]=n.rightValue,e),s(0,e.leftIndex=-1,e),s(0,e.operationSelected=u.None,e)},p=n=>{if(e.choices[n]!==0)if(e.operationSelected!==u.None&&e.leftIndex!==n){let v=new ce(e.leftIndex,e.choices[e.leftIndex],e.operationSelected,n,e.choices[n]);f(v)?a(v):(s(0,e.errorClick=n,e),setTimeout(()=>{s(0,e.errorClick=-1,e)},1e3))}else e.leftIndex===n?(s(0,e.leftIndex=-1,e),s(0,e.operationSelected=u.None,e)):s(0,e.leftIndex=n,e)},i=n=>{n===u.Undo?d():e.leftIndex!==-1&&s(0,e.operationSelected=n,e)};return[e,p,i,n=>p(n),n=>i(n),()=>s(0,e=R())]}class de extends te{constructor(l){super(),le(this,l,ie,ae,$,{})}}export{de as component};
