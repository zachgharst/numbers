var Y=Object.defineProperty;var Z=(s,t,n)=>t in s?Y(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var d=(s,t,n)=>(Z(s,typeof t!="symbol"?t+"":t,n),n);import{s as $,n as m,o as ee}from"../chunks/scheduler.e108d1fd.js";import{S as y,i as M,g as v,m as E,h as b,j as k,n as U,f as g,k as S,a as I,x as p,o as Q,y as W,s as w,c as V,z as _,A as j,B as te,r as N,u as G,v as O,d as x,t as T,w as A}from"../chunks/index.00f910e4.js";function D(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}const ne=(s,t)=>{const n=t-s;return s+Math.floor(Math.random()*n)},se=()=>{const s=[];let t=1,n=5;for(let e=0;e<7;e++)s.push(ne(t,n)),t=s[s.length-1]+1,n=t+5;return s},X=s=>{let n=structuredClone(s),e=0;const l=Math.floor(Math.random()*n.length);let a=n[l];n=n.filter(o=>o!==a);for(let o=0;o<4;o++){const i=Math.floor(Math.random()*n.length),r=n[i];n=n.filter(h=>h!==r);const c=["+","+","-"];switch(a*r<600&&(c.push("*"),c.push("*"),c.push("*")),(a%r===0||r%a===0)&&(c.push("/"),c.push("/"),c.push("/"),c.push("/")),c[Math.floor(Math.random()*c.length)]){case"+":e=a+r;break;case"-":e=a-r,e<0&&(e*=-1);break;case"*":e=a*r;break;case"/":a>r?e=a/r:e=r/a;break}a=e}return s.includes(e)?X(s):e},u={None:"none",Undo:"undo",Add:"add",Subtract:"subtract",Multiply:"multiply",Divide:"divide"},R=[u.Undo,u.Add,u.Subtract,u.Multiply,u.Divide],le=s=>{switch(s){case u.Undo:return"⎌";case u.Add:return"+";case u.Subtract:return"-";case u.Multiply:return"×";case u.Divide:return"÷"}return""},B=class B{constructor(t,n){d(this,"choices",[]);d(this,"goal",0);d(this,"leftIndex",-1);d(this,"rightIndex",-1);d(this,"operationSelected",u.None);d(this,"errorClick",-1);d(this,"actionsTaken",[]);this.choices=t,this.goal=n}};d(B,"Create",()=>{const t=se(),n=X(t);return new B(t,n)});let C=B;function oe(s){let t,n;return{c(){t=v("h1"),n=E(s[0]),this.h()},l(e){t=b(e,"H1",{class:!0});var l=k(t);n=U(l,s[0]),l.forEach(g),this.h()},h(){S(t,"class","svelte-1dx8c1u")},m(e,l){I(e,t,l),p(t,n)},p(e,[l]){l&1&&Q(n,e[0])},i:m,o:m,d(e){e&&g(t)}}}function re(s,t,n){let{goal:e}=t;return s.$$set=l=>{"goal"in l&&n(0,e=l.goal)},[e]}class ae extends y{constructor(t){super(),M(this,t,re,oe,$,{goal:0})}}class ce{constructor(t,n,e,l,a){d(this,"leftIndex");d(this,"leftValue");d(this,"operation");d(this,"rightIndex");d(this,"rightValue");this.leftIndex=t,this.leftValue=n,this.operation=e,this.rightIndex=l,this.rightValue=a}}function F(s,t,n){const e=s.slice();return e[5]=t[n],e[7]=n,e}function J(s){let t,n=s[5]+"",e,l,a,o;function i(){return s[2](s[7])}return{c(){t=v("button"),e=E(n),l=w(),this.h()},l(r){t=b(r,"BUTTON",{class:!0});var c=k(t);e=U(c,n),l=V(c),c.forEach(g),this.h()},h(){S(t,"class","numberChoice svelte-1mlp9fk"),_(t,"error",s[0].errorClick===s[7]),_(t,"selected",s[0].leftIndex===s[7]),_(t,"invisible",s[5]===0)},m(r,c){I(r,t,c),p(t,e),p(t,l),a||(o=j(t,"click",i),a=!0)},p(r,c){s=r,c&1&&n!==(n=s[5]+"")&&Q(e,n),c&1&&_(t,"error",s[0].errorClick===s[7]),c&1&&_(t,"selected",s[0].leftIndex===s[7]),c&1&&_(t,"invisible",s[5]===0)},d(r){r&&g(t),a=!1,o()}}}function ie(s){let t,n=D(s[0].choices),e=[];for(let l=0;l<n.length;l+=1)e[l]=J(F(s,n,l));return{c(){t=v("div");for(let l=0;l<e.length;l+=1)e[l].c()},l(l){t=b(l,"DIV",{});var a=k(t);for(let o=0;o<e.length;o+=1)e[o].l(a);a.forEach(g)},m(l,a){I(l,t,a);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(t,null)},p(l,[a]){if(a&3){n=D(l[0].choices);let o;for(o=0;o<n.length;o+=1){const i=F(l,n,o);e[o]?e[o].p(i,a):(e[o]=J(i),e[o].c(),e[o].m(t,null))}for(;o<e.length;o+=1)e[o].d(1);e.length=n.length}},i:m,o:m,d(l){l&&g(t),W(e,l)}}}function ue(s,t,n){let{gameState:e}=t;const l=r=>!(r.operation==u.Subtract&&r.leftValue-r.rightValue<0||r.operation==u.Divide&&r.leftValue%r.rightValue!==0),a=r=>{n(0,e.leftIndex=r.rightIndex,e),n(0,e.operationSelected=u.None,e);let c=0;switch(r.operation){case u.Add:c=r.leftValue+r.rightValue;break;case u.Subtract:c=r.leftValue-r.rightValue;break;case u.Multiply:c=r.leftValue*r.rightValue;break;case u.Divide:c=r.leftValue/r.rightValue;break}n(0,e.choices[r.rightIndex]=c,e),n(0,e.choices[r.leftIndex]=0,e),e.choices.includes(e.goal)&&alert("holy shit you win!"),e.actionsTaken.push(r)},o=r=>{if(e.choices[r]!==0)if(e.operationSelected!==u.None&&e.leftIndex!==r){let c=new ce(e.leftIndex,e.choices[e.leftIndex],e.operationSelected,r,e.choices[r]);l(c)?a(c):(n(0,e.errorClick=r,e),setTimeout(()=>{n(0,e.errorClick=-1,e)},1e3))}else e.leftIndex===r?(n(0,e.leftIndex=-1,e),n(0,e.operationSelected=u.None,e)):n(0,e.leftIndex=r,e)},i=r=>o(r);return s.$$set=r=>{"gameState"in r&&n(0,e=r.gameState)},[e,o,i]}class fe extends y{constructor(t){super(),M(this,t,ue,ie,$,{gameState:0})}}function K(s,t,n){const e=s.slice();return e[4]=t[n],e}function L(s){let t,n=le(s[4])+"",e,l,a,o;function i(){return s[2](s[4])}return{c(){t=v("button"),e=E(n),l=w(),this.h()},l(r){t=b(r,"BUTTON",{class:!0});var c=k(t);e=U(c,n),l=V(c),c.forEach(g),this.h()},h(){S(t,"class","opButton svelte-10wqfjw"),_(t,"selected",s[0].operationSelected===s[4])},m(r,c){I(r,t,c),p(t,e),p(t,l),a||(o=j(t,"click",i),a=!0)},p(r,c){s=r,c&1&&_(t,"selected",s[0].operationSelected===s[4])},d(r){r&&g(t),a=!1,o()}}}function he(s){let t,n=D(R),e=[];for(let l=0;l<n.length;l+=1)e[l]=L(K(s,n,l));return{c(){t=v("div");for(let l=0;l<e.length;l+=1)e[l].c()},l(l){t=b(l,"DIV",{});var a=k(t);for(let o=0;o<e.length;o+=1)e[o].l(a);a.forEach(g)},m(l,a){I(l,t,a);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(t,null)},p(l,[a]){if(a&3){n=D(R);let o;for(o=0;o<n.length;o+=1){const i=K(l,n,o);e[o]?e[o].p(i,a):(e[o]=L(i),e[o].c(),e[o].m(t,null))}for(;o<e.length;o+=1)e[o].d(1);e.length=n.length}},i:m,o:m,d(l){l&&g(t),W(e,l)}}}function de(s,t,n){let{gameState:e}=t;const l=()=>{const i=e.actionsTaken.pop();i!==void 0&&(n(0,e.choices[i.leftIndex]=i.leftValue,e),n(0,e.choices[i.rightIndex]=i.rightValue,e),n(0,e.leftIndex=-1,e),n(0,e.operationSelected=u.None,e))},a=i=>{i===u.Undo?l():e.leftIndex!==-1&&n(0,e.operationSelected=i,e)},o=i=>a(i);return s.$$set=i=>{"gameState"in i&&n(0,e=i.gameState)},[e,a,o]}class ge extends y{constructor(t){super(),M(this,t,de,he,$,{gameState:0})}}function me(s){let t,n,e="New Game",l,a;return{c(){t=v("div"),n=v("button"),n.textContent=e,this.h()},l(o){t=b(o,"DIV",{});var i=k(t);n=b(i,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),te(n)!=="svelte-1ell0uf"&&(n.textContent=e),i.forEach(g),this.h()},h(){S(n,"id","newGame"),S(n,"class","svelte-y1mxsi")},m(o,i){I(o,t,i),p(t,n),l||(a=j(n,"click",s[1]),l=!0)},p:m,i:m,o:m,d(o){o&&g(t),l=!1,a()}}}function pe(s,t,n){let{newGame:e}=t;const l=()=>e();return s.$$set=a=>{"newGame"in a&&n(0,e=a.newGame)},[e,l]}class _e extends y{constructor(t){super(),M(this,t,pe,me,$,{newGame:0})}}function ve(s){let t,n,e,l,a,o,i,r,c;return n=new ae({props:{goal:s[0].goal}}),l=new fe({props:{gameState:s[0]}}),o=new ge({props:{gameState:s[0]}}),r=new _e({props:{newGame:s[1]}}),{c(){t=v("div"),N(n.$$.fragment),e=w(),N(l.$$.fragment),a=w(),N(o.$$.fragment),i=w(),N(r.$$.fragment),this.h()},l(f){t=b(f,"DIV",{class:!0});var h=k(t);G(n.$$.fragment,h),e=V(h),G(l.$$.fragment,h),a=V(h),G(o.$$.fragment,h),i=V(h),G(r.$$.fragment,h),h.forEach(g),this.h()},h(){S(t,"class","container svelte-u153dm")},m(f,h){I(f,t,h),O(n,t,null),p(t,e),O(l,t,null),p(t,a),O(o,t,null),p(t,i),O(r,t,null),c=!0},p(f,[h]){const q={};h&1&&(q.goal=f[0].goal),n.$set(q);const P={};h&1&&(P.gameState=f[0]),l.$set(P);const z={};h&1&&(z.gameState=f[0]),o.$set(z);const H={};h&1&&(H.newGame=f[1]),r.$set(H)},i(f){c||(x(n.$$.fragment,f),x(l.$$.fragment,f),x(o.$$.fragment,f),x(r.$$.fragment,f),c=!0)},o(f){T(n.$$.fragment,f),T(l.$$.fragment,f),T(o.$$.fragment,f),T(r.$$.fragment,f),c=!1},d(f){f&&g(t),A(n),A(l),A(o),A(r)}}}function be(s,t,n){let e=new C([0,0,0,0,0,0,0],0);return ee(()=>{n(0,e=C.Create())}),[e,()=>n(0,e=C.Create())]}class we extends y{constructor(t){super(),M(this,t,be,ve,$,{})}}export{we as component};
